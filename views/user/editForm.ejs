<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../partials/head') %>
    <title>Edit Profile</title>
</head>

<body class="index-body">

  <%- include('../partials/header') %>

    <main class="index-main-container">
      <div class="index-container">
        <form action="/users/edit/<%=user.user_id%>?_method=PUT" method="POST">
          
          <h1 class="index-title">Edit your profile</h1>
          
          <div class="inputs-container">
            <div>
              <input class="login-input" type="text" name="name" placeholder="Name" value="<%= user.name%>">
              <% if(locals.errors && errors.name){ %>
                <div class="text-danger">
                  <%= errors.name.msg %>
                </div>
                <% } %>
            </div>

            <div>
              <input class="login-input" type="email" name="email" placeholder="Email" value="<%= user.email%>">
              <% if(locals.errors && errors.email){ %>
                <div class="text-danger">
                  <%= errors.email.msg %>
                </div>
                <% } %>
            </div>

            <div>
              <input class="login-input" type="password" name="password" placeholder="New Password">
              <% if(locals.errors && errors.password){ %>
                <div class="text-danger">
                  <%= errors.password.msg %>
                </div>
                <% } %>
            </div>

            <div>
              <input class="login-input" type="password" name="confirmPassword" placeholder="Confirm password">
              <% if(locals.errors && errors.confirmPassword){ %>
                <div class="text-danger">
                  <%= errors.confirmPassword.msg %>
                </div>
                <% } %>
            </div>

            <div>
              <select class="login-input" name="currency">
                <% for (let currency in currencies) { %>
                  <option value="<%=currency%>" <%=currency==user.currency ? "selected" : "" %> >
                    <%= currency%> - <%= currencies[currency]%>
                  </option>
                  <%}%>
              </select>
              <% if(locals.errors && errors.currency){ %>
                <div class="text-danger">
                  <%= errors.currency.msg %>
                </div>
                <% } %>
            </div>
          </div>

          <div class="index-button-container">
            <button class="index-button" type="submit"><i class="fa-solid fa-check"></i></button>
            <button class="index-button"><a href="http://localhost:3000"><i class="fa-solid fa-xmark"></i></a></button>
          </div>          

        </form>

        <form action="/users/<%=user.user_id%>?_method=delete" method="POST">
          <button class="index-button" type="submit"><i class="fa-regular fa-trash-can"></i></button>
        </form>

      </div>

    </main>

    <%- include('../partials/footer') %>

</body>

</html>